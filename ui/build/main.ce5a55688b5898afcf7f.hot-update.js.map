{"version":3,"file":"main.ce5a55688b5898afcf7f.hot-update.js","mappings":"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CA;AACA;AACA;AACA;;AACA;AACA;AACA;;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AANA;AAAA;AAAA;AAAA;AAAA;AADA;AAAA;AAAA;AAAA;AAAA;AADA;AAAA;AAAA;AAAA;AAAA;AADA;AAAA;AAAA;AAAA;AAAA;AADA;AAAA;AAAA;AAAA;AAAA;AARA;AAAA;AAAA;AAAA;AAAA;AADA;AAAA;AAAA;AAAA;AAAA;AA4BA;;AA3DA;;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AClGA","sources":["/Users/sean.narenthiran/Code/lightning-collaborative/ui/src/Metrics.js","/Users/sean.narenthiran/Code/lightning-collaborative/ui/webpack/runtime/getFullHash"],"sourcesContent":["import * as React from 'react';\nimport Box from '@mui/material/Box';\nimport Card from '@mui/material/Card';\nimport CardContent from '@mui/material/CardContent';\nimport CssBaseline from '@mui/material/CssBaseline';\nimport GlobalStyles from '@mui/material/GlobalStyles';\nimport Container from '@mui/material/Container';\nimport { CopyBlock, dracula } from \"react-code-blocks\";\nimport { styled } from \"@mui/material/styles\";\nimport Train from './Train';\nimport ScrollableFeed from 'react-scrollable-feed'\nimport Paper from '@mui/material/Paper';\nimport Grid from '@mui/material/Grid';\nimport Typography from '@mui/material/Typography';\nimport CollaborativeLinearProgress from \"./components/ProgressBar\";\nimport Title from './components/Title';\nimport MuiTooltip, { tooltipClasses } from '@mui/material/Tooltip';\n\nconst CardContentNoPadding = styled(CardContent)(`\n  padding: 0;\n  height: \"100%\",\n  \"&:last-child\": {\n      paddingBottom: 0\n    }\n  }\n`);\n\nconst LightTooltip = styled(({ className, ...props }) => (\n  <MuiTooltip {...props} classes={{ popper: className }} />\n))(({ theme }) => ({\n  [`& .${tooltipClasses.tooltip}`]: {\n    backgroundColor: 'white',\n    color: 'black',\n    boxShadow: 0,\n    fontSize: 11,\n  },\n}));\n\nfunction Progress(props) {\n  return (\n    <React.Fragment>\n      <Paper sx={{ height: \"50%\", p: 2, display: 'flex', mb: 1, mt: 2, flexDirection: 'column', background: \"transparent\", borderRadius: 2, border: 1, borderColor: \"#ffffff44\", boxShadow: '0' }}>\n        <Grid container rowSpacing={1} columnSpacing={{ xs: 1, sm: 2, md: 3 }}>\n          <Grid item xs={6}>\n            <Typography variant=\"h5\" align=\"left\" color=\"text.secondary\" component=\"p\" sx={{ letterSpacing: 3 }}>\n              GLOBAL PROGRESS\n            </Typography>\n            <Typography variant=\"body2\" align=\"left\" color=\"text.secondary\" component=\"p\" sx={{ letterSpacing: 1 }}>\n              Progress for the collaborative training run.\n            </Typography>\n          </Grid>\n        </Grid>\n        <CollaborativeLinearProgress eta={props.eta} progress={props.progress} epoch={props.epoch} />\n        <Grid container rowSpacing={1} columnSpacing={{ xs: 1, sm: 2, md: 3 }}>\n          <Grid item xs={8}>\n            <Card sx={{ p: 2, display: 'flex', mb: 1, mt: 2, flexDirection: 'column', background: \"transparent\", borderRadius: 2, border: 1, borderColor: \"#ffffff44\", boxShadow: '0' }}>\n              <Title><Typography variant=\"h6\" sx={{ color: 'white', letterSpacing: 3 }}>STATISTICS</Typography></Title>\n              <Container disableGutters id=\"left\" sx={{ display: 'flex', flexDirection: 'row',  }}>\n                  <Container disableGutters sx={{pl : 0, pr: 2}}>\n                      <Title>\n                        <LightTooltip title=\"Time remaining till next global iteration.\" followCursor>\n                          <Typography variant=\"caption\" sx={{ color: 'white' }}>GLOBAL EPOCH ETA</Typography>\n                        </LightTooltip>\n                      </Title>\n                    <Title><Typography variant=\"h5\" sx={{ color: 'white' }}>{props.eta}</Typography></Title>\n                  </Container>\n                  <Container disableGutters sx={{pl : 0, pr: 0}}>\n                    <LightTooltip title=\"Number of machines currently training collaboratively.\" followCursor>\n                      <Title><Typography variant=\"caption\" sx={{ color: 'white' }}>NUMBER OF PEERS</Typography></Title>\n                    </LightTooltip>\n                    <Title><Typography variant=\"h5\" sx={{ color: 'white' }}>{props.peers}</Typography></Title>\n                  </Container>\n                  <Container disableGutters sx={{pl : 0, pr: 0}}>\n                    <LightTooltip title=\"Running mean of the contribution your local machine has made to each global iteration.\" followCursor>\n                      <Title><Typography variant=\"caption\" sx={{ color: 'white' }}>CONTRIBUTION</Typography></Title>\n                    </LightTooltip>\n                    <Title><Typography variant=\"h5\" sx={{ color: 'white' }}>{`${props.contribution}%`}</Typography></Title>\n                  </Container>\n              </Container>\n            </Card>\n          </Grid>\n          <Grid item xs={4}>\n            <Card sx={{ p: 2, display: 'flex', mb: 1, mt: 2, flexDirection: 'column', background: \"transparent\", borderRadius: 2, border: 1, borderColor: \"#ffffff44\", boxShadow: '0' }}>\n              <Title><Typography variant=\"h6\" sx={{ color: 'white', letterSpacing: 3 }}>METRICS</Typography></Title>\n              <Container disableGutters id=\"left\" sx={{ display: 'flex', flexDirection: 'row',  }}>\n                  <Container disableGutters sx={{pl : 0, pr: 2}}>\n                    <Title><Typography variant=\"caption\" sx={{ color: 'white' }}>TRAINING LOSS</Typography></Title>\n                    <Title><Typography variant=\"h5\" sx={{ color: 'white' }}>{props.loss}</Typography></Title>\n                  </Container>\n              </Container>\n            </Card>\n          </Grid>\n        </Grid>\n      </Paper>\n    </React.Fragment>\n  );\n}\n\nexport default function Metrics(props) {\n\n  const [progress, setProgress] = React.useState(0);\n  const [epoch, setEpoch] = React.useState('-');\n  const [peers, setPeers] = React.useState('-');\n  const [contribution, setContribution] = React.useState(\"0\");\n  const [eta, setEta] = React.useState('-');\n  const [loss, setLoss] = React.useState('-');\n\n  var lightningState = props.lightningState;\n\n  React.useEffect(() => {\n    if (lightningState) {\n      let work_state = lightningState.flows.train_flow.works.work_0?.vars;\n      if (work_state && work_state?.progress_state) {\n        setProgress(work_state.progress_state.progress);\n        setEpoch(work_state.progress_state.epoch);\n        setEta(work_state.progress_state.eta);\n        setPeers(work_state.progress_state.peers);\n        if (work_state.contribution) {\n          setContribution(work_state.contribution);\n        }\n        if (work_state.loss) {\n          setLoss(work_state.loss);\n        }\n      }\n    }\n  }, [lightningState]);\n\n\n  return (\n    <React.Fragment>\n      <Container sx={{ flex: 1, display: 'flex', flexDirection: 'column' }}>\n        <Typography variant=\"h2\" align=\"left\" color=\"text.secondary\" component=\"p\" sx={{ ml: 1, letterSpacing: 3 }}>\n          &#8203;\n        </Typography>\n        <Typography variant=\"body1\" align=\"left\" color=\"text.secondary\" component=\"p\" sx={{ ml: 1, letterSpacing: 1 }}>\n          &#8203;\n        </Typography>\n        {Progress({eta, progress, epoch, peers, contribution, loss})}\n        <Card sx={{ borderRadius: 2, height: \"100%\" }}>\n          <CardContent sx={{ p: 0, height: \"100%\", '&:last-child': { pb: 0 }, backgroundColor: '#282a36' }}>\n            <Box sx={{ height: \"300px\", overflowY: \"auto\", width: '100%', pb: 0, backgroundColor: '#282a36' }}>\n              <ScrollableFeed>\n                <CopyBlock\n                  text={props.logState}\n                  language={\"bash\"}\n                  showLineNumbers={false}\n                  wrapLines\n                  theme={dracula}\n                  customStyle={{ paddingLeft: 20 }}\n                />\n              </ScrollableFeed>\n            </Box>\n          </CardContent>\n        </Card>\n      </Container>\n    </React.Fragment>\n  )\n}","__webpack_require__.h = () => (\"2fc166fefff9461aba61\")"],"names":[],"sourceRoot":""}